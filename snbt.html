<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNBT - QuizNation</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: "Segoe UI", system-ui, sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .particle {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.6;
            animation: float-particle 15s infinite;
        }

        .particle:nth-child(1) {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .particle:nth-child(2) {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.15);
            top: 60%;
            right: 15%;
            animation-delay: 3s;
        }

        .particle:nth-child(3) {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.25);
            top: 80%;
            left: 70%;
            animation-delay: 6s;
        }

        @keyframes float-particle {

            0%,
            100% {
                transform: translateY(0) translateX(0) rotate(0deg);
            }

            33% {
                transform: translateY(-30px) translateX(20px) rotate(120deg);
            }

            66% {
                transform: translateY(20px) translateX(-20px) rotate(240deg);
            }
        }

        .app {
            width: 100%;
            max-width: 1100px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            min-height: 600px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Level Selection Screen */
        .level-selection {
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .level-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .level-type-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        .level-type-title {
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .level-type-desc {
            font-size: 1.1rem;
            color: #718096;
            line-height: 1.6;
        }

        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .level-card {
            background: linear-gradient(135deg, #ffffff, #f8f9fd);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
            animation: slideUp 0.6s ease backwards;
        }

        .level-card:nth-child(1) {
            animation-delay: 0.1s;
        }

        .level-card:nth-child(2) {
            animation-delay: 0.2s;
        }

        .level-card:nth-child(3) {
            animation-delay: 0.3s;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .level-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .level-card:hover::before {
            left: 100%;
        }

        .level-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: #667eea;
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.3);
        }

        .level-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .level-hero-icon {
            font-size: 3.5rem;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
        }

        .level-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .level-hero-name {
            font-size: 1.8rem;
            font-weight: 900;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .level-hero-desc {
            font-size: 0.95rem;
            color: #718096;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .level-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .level-stat {
            flex: 1;
            text-align: center;
            padding: 12px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
        }

        .level-stat-value {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .level-stat-label {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 5px;
            text-transform: uppercase;
        }

        .level-progress-container {
            margin-bottom: 15px;
        }

        .level-progress-label {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .level-progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 10px;
            overflow: hidden;
        }

        .level-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .level-start-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 15px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .level-start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .back-home {
            text-align: center;
            margin-top: 30px;
        }

        .back-home-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 30px;
            background: white;
            color: #667eea;
            text-decoration: none;
            font-weight: 700;
            border-radius: 15px;
            border: 3px solid #667eea;
            transition: all 0.3s ease;
        }

        .back-home-link:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Quiz Screen (reuse existing styles) */
        header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            animation: fadeDown 0.6s ease;
            justify-content: space-between;
        }

        @keyframes fadeDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-left {
            display: flex;
            align-items: center;
            flex: 1;
        }

        header h2 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            font-weight: 800;
            min-width: 200px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Timer Display */
        .timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 25px;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.4);
            min-width: 150px;
        }

        .timer-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 5px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .timer-display {
            font-size: 2rem;
            font-weight: 900;
            color: white;
            font-family: 'Courier New', monospace;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .timer-container.warning {
            background: linear-gradient(135deg, #f59e0b, #fb923c);
            animation: pulse-warning 1s infinite;
        }

        .timer-container.danger {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            animation: pulse-danger 0.5s infinite;
        }

        @keyframes pulse-warning {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes pulse-danger {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(220, 38, 38, 0.6);
            }

            50% {
                transform: scale(1.1);
                box-shadow: 0 12px 35px rgba(220, 38, 38, 0.8);
            }
        }

        .type-emoji {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        .progress {
            flex: 1;
            height: 14px;
            background: linear-gradient(90deg, #f0f0f0, #e0e0e0);
            border-radius: 20px;
            overflow: hidden;
            margin-left: 20px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .progress::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.3), transparent);
            border-radius: 20px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            transition: width 0.4s ease;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .question-nav {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 25px;
            animation: fadeUp 0.6s ease;
        }

        .nav-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
        }

        .nav-number {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #4a5568;
        }

        .nav-number:hover {
            transform: scale(1.1);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-number.answered {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border-color: transparent;
        }

        .nav-number.current {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            border-color: transparent;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .content-wrapper {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .card {
            flex: 1;
            background: linear-gradient(135deg, #ffffff, #f8f9fd);
            border-radius: 28px;
            padding: 40px;
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.15);
            animation: fadeUp 0.5s ease;
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question {
            font-size: 1.6rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 30px;
            line-height: 1.4;
            position: relative;
            padding-left: 40px;
            flex-shrink: 0;
        }

        .question::before {
            content: '‚ùì';
            position: absolute;
            left: 0;
            font-size: 2rem;
            animation: wiggle 3s infinite;
        }

        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-10deg);
            }

            75% {
                transform: rotate(10deg);
            }
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            flex: 1;
        }

        .option {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            font-weight: 600;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            color: #4a5568;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            transition: left 0.5s ease;
        }

        .option:hover::before {
            left: 100%;
        }

        .option:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: #667eea;
            background: linear-gradient(135deg, #eef6ff, #e6f0ff);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .option.selected {
            background: linear-gradient(135deg, #bee3f8, #90cdf4);
            border-color: #4299e1;
            color: #1a365d;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .nav-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .nav-btn-prev {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            color: #2d3748;
        }

        .nav-btn-prev:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .nav-btn-next {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .nav-btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .footer {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            font-size: 0.95rem;
            color: #718096;
            animation: fadeIn 0.8s ease;
            border-top: 2px solid #e2e8f0;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .footer-left {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .finish-btn {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            padding: 12px 30px;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.3);
        }

        .finish-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.5);
        }

        .back-link {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .back-link:hover {
            border-color: #667eea;
            background: #667eea;
            -webkit-text-fill-color: white;
        }

        .result-container {
            text-align: center;
            animation: resultAppear 0.6s ease;
        }

        @keyframes resultAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .result-emoji {
            font-size: 5rem;
            animation: emojiFloat 2s ease-in-out infinite;
        }

        @keyframes emojiFloat {

            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }

            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }

        .result-score {
            font-size: 5.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
            animation: scoreCount 1s ease;
        }

        @keyframes scoreCount {
            from {
                opacity: 0;
                transform: scale(0.5) rotateY(180deg);
            }

            to {
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        .result-predicate {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #f093fb, #f5576c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-box {
            background: linear-gradient(135deg, #ffffff, #f7fafc);
            border-radius: 20px;
            padding: 25px 15px;
            border: 3px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-8px);
            border-color: #667eea;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        .stat-label {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 900;
            color: #2d3748;
        }

        .result-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 35px;
        }

        .btn {
            padding: 16px 40px;
            border-radius: 15px;
            font-weight: 700;
            cursor: pointer;
            border: none;
            font-size: 1.05rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .btn-secondary {
            background: #fff;
            color: #764ba2;
            border: 3px solid #764ba2;
        }

        .btn-secondary:hover {
            background: #764ba2;
            color: white;
            transform: translateY(-3px);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f093fb;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .app {
                padding: 25px;
            }

            .level-grid {
                grid-template-columns: 1fr;
            }

            .level-type-icon {
                font-size: 3.5rem;
            }

            .level-type-title {
                font-size: 2rem;
            }

            header {
                flex-direction: column;
                gap: 15px;
            }

            .header-left {
                flex-direction: column;
                width: 100%;
            }

            .timer-container {
                width: 100%;
            }

            .progress {
                margin-left: 0;
                margin-top: 10px;
            }

            .nav-grid {
                grid-template-columns: repeat(5, 1fr);
            }

            .content-wrapper {
                flex-direction: column;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .question {
                font-size: 1.3rem;
                padding-left: 35px;
            }

            .result-score {
                font-size: 3.5rem;
            }

            .result-stats {
                grid-template-columns: 1fr;
            }

            .footer {
                flex-direction: column;
                gap: 15px;
            }

            .footer-left {
                flex-direction: column;
                width: 100%;
            }

            .finish-btn,
            .back-link {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>

<body>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>

    <div class="app" id="app">
        <!-- Level Selection Screen -->
        <div class="level-selection" id="levelSelection">
            <!-- Will be populated by JavaScript -->
        </div>

        <!-- Quiz Screen -->
        <div class="quiz-screen" id="quizScreen">
            <header>
                <div class="header-left">
                    <h2><span class="type-emoji" id="typeEmoji">üéì</span><span id="typeTitle"></span></h2>
                    <div class="progress">
                        <div class="progress-bar" id="progressBar"></div>
                    </div>
                </div>
                <div class="timer-container" id="timerContainer">
                    <div class="timer-label">‚è±Ô∏è Waktu Tersisa</div>
                    <div class="timer-display" id="timerDisplay">05:00</div>
                </div>
            </header>

            <div class="question-nav">
                <div class="nav-title">üéØ Pilih Nomor Soal</div>
                <div class="nav-grid" id="navGrid"></div>
            </div>

            <div class="content-wrapper">
                <div class="card">
                    <div class="question" id="question"></div>
                    <div class="options" id="options"></div>
                    <div class="nav-buttons">
                        <button class="nav-btn nav-btn-prev" id="prevBtn" onclick="navigateQuestion(-1)">‚Üê
                            Sebelumnya</button>
                        <button class="nav-btn nav-btn-next" id="nextBtn" onclick="navigateQuestion(1)">Selanjutnya
                            ‚Üí</button>
                    </div>
                </div>
            </div>

            <div class="footer">
                <div class="footer-left">
                    <span id="counter"></span>
                    <button class="finish-btn" onclick="finishQuiz()">üèÅ Selesai</button>
                </div>
                <a href="index.html" class="back-link">‚¨ÖÔ∏è Back To Homepage</a>
            </div>
        </div>
        <!-- End Quiz Screen -->
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const type = params.get("type") || "tps";
        const levelId = params.get("level"); // null = show level selection

        // Level Data dengan Nama Pahlawan
        const levelData = {
            tps: {
                icon: 'üß†',
                title: 'Tes Potensi Skolastik',
                desc: 'Uji kemampuan penalaran umum, pengetahuan kuantitatif, dan pemahaman bacaan',
                levels: [
                    { id: 1, name: 'Soekarno', hero: 'üó£Ô∏è', desc: 'Level dasar untuk menguji kemampuan logika dan penalaran dasar', questions: 2, difficulty: 'Mudah', time: 5 },
                    { id: 2, name: 'Mohammad Hatta', hero: 'üìö', desc: 'Level menengah dengan soal penalaran kuantitatif dan pemahaman bacaan', questions: 2, difficulty: 'Sedang', time: 5 },
                    { id: 3, name: 'Sutan Sjahrir', hero: 'üß†', desc: 'Level advanced dengan kombinasi logika kompleks dan analisis data', questions: 2, difficulty: 'Sulit', time: 5 }
                ]
            },
            indo: {
                icon: 'üìö',
                title: 'Bahasa Indonesia',
                desc: 'Latihan pemahaman teks, analisis wacana, dan kemampuan berbahasa Indonesia',
                levels: [
                    { id: 1, name: 'Ki Hajar Dewantara', hero: 'üìñ', desc: 'Penguasaan kata baku, ejaan, dan kalimat dasar bahasa Indonesia', questions: 2, difficulty: 'Mudah', time: 5 },
                    { id: 2, name: 'W.R. Supratman', hero: 'üéº', desc: 'Analisis wacana, pemahaman teks, dan struktur kalimat kompleks', questions: 2, difficulty: 'Sedang', time: 5 },
                    { id: 3, name: 'Chairil Anwar', hero: '‚úçÔ∏è', desc: 'Kritik sastra, analisis mendalam, dan interpretasi teks advanced', questions: 2, difficulty: 'Sulit', time: 5 }
                ]
            },
            english: {
                icon: 'üåê',
                title: 'Bahasa Inggris',
                desc: 'Reading comprehension, grammar, vocabulary, dan analisis teks berbahasa Inggris',
                levels: [
                    { id: 1, name: 'Cut Nyak Dien', hero: '‚öîÔ∏è', desc: 'Basic grammar, vocabulary, and simple sentence structures', questions: 2, difficulty: 'Mudah', time: 5 },
                    { id: 2, name: 'R.A. Kartini', hero: 'üìù', desc: 'Reading comprehension, intermediate grammar, and contextual vocab', questions: 2, difficulty: 'Sedang', time: 5 },
                    { id: 3, name: 'Sultan Hasanuddin', hero: 'üè∞', desc: 'Advanced reading, complex grammar, and academic vocabulary', questions: 2, difficulty: 'Sulit', time: 5 }
                ]
            },
            math: {
                icon: 'üî¢',
                title: 'Penalaran Matematika',
                desc: 'Soal logika matematis, penalaran kuantitatif, dan pemecahan masalah numerik',
                levels: [
                    { id: 1, name: 'B.J. Habibie', hero: '‚úàÔ∏è', desc: 'Operasi dasar, perbandingan, dan logika matematis sederhana', questions: 2, difficulty: 'Mudah', time: 5 },
                    { id: 2, name: 'Tjokro Aminoto', hero: 'üî¢', desc: 'Aljabar, geometri, dan penalaran kuantitatif menengah', questions: 2, difficulty: 'Sedang', time: 5 },
                    { id: 3, name: 'Otto Iskandardinata', hero: 'üßÆ', desc: 'Problem solving kompleks, statistika, dan logika advanced', questions: 2, difficulty: 'Sulit', time: 5 }
                ]
            }
        };

        // Show level selection or start quiz
        if (!levelId) {
            showLevelSelection();
        } else {
            startQuiz();
        }

        function showLevelSelection() {
            document.getElementById('levelSelection').style.display = 'flex';
            document.getElementById('quizScreen').style.display = 'none';

            const data = levelData[type];
            const container = document.getElementById('levelSelection');

            let html = `
                <div class="level-header">
                    <div class="level-type-icon">${data.icon}</div>
                    <div class="level-type-title">${data.title}</div>
                    <div class="level-type-desc">${data.desc}</div>
                </div>
                <div class="level-grid">
            `;

            data.levels.forEach(level => {
                const progress = parseInt(localStorage.getItem(`snbt_${type}_level${level.id}_percentage`)) || 0;
                const isCompleted = localStorage.getItem(`snbt_${type}_level${level.id}_completed`) === 'true';

                html += `
                    <div class="level-card" onclick="selectLevel(${level.id})">
                        <div class="level-card-header">
                            <div class="level-hero-icon">${level.hero}</div>
                            <div class="level-badge">${level.difficulty}</div>
                        </div>
                        <div class="level-hero-name">${level.name}</div>
                        <div class="level-hero-desc">${level.desc}</div>
                        <div class="level-stats">
                            <div class="level-stat">
                                <div class="level-stat-value">${level.questions}</div>
                                <div class="level-stat-label">Soal</div>
                            </div>
                            <div class="level-stat">
                                <div class="level-stat-value">${level.time}</div>
                                <div class="level-stat-label">Menit</div>
                            </div>
                        </div>
                        <div class="level-progress-container">
                            <div class="level-progress-label">Progress: ${progress}%</div>
                            <div class="level-progress-bar">
                                <div class="level-progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                        <button class="level-start-btn">
                            ${isCompleted ? 'üîÑ Ulangi Level' : 'üöÄ Mulai Level'}
                        </button>
                    </div>
                `;
            });

            html += `
                </div>
                <div class="back-home">
                    <a href="index.html" class="back-home-link">
                        <span>‚¨ÖÔ∏è</span>
                        <span>Kembali ke Beranda</span>
                    </a>
                </div>
            `;

            container.innerHTML = html;
        }

        function selectLevel(id) {
            window.location.href = `snbt.html?type=${type}&level=${id}`;
        }

        function startQuiz() {
            document.getElementById('levelSelection').style.display = 'none';
            document.getElementById('quizScreen').classList.add('active');

            // Continue with existing quiz logic
            initializeQuiz();
        }

        function initializeQuiz() {
            const params = new URLSearchParams(window.location.search);

            const typeConfig = {
                tps: { emoji: 'üß†', title: 'Tes Potensi Skolastik', totalQuestions: 100 },
                indo: { emoji: 'üìö', title: 'Bahasa Indonesia', totalQuestions: 50 },
                english: { emoji: 'üåê', title: 'Bahasa Inggris', totalQuestions: 50 },
                math: { emoji: 'üî¢', title: 'Penalaran Matematika', totalQuestions: 50 }
            };

            const config = typeConfig[type] || typeConfig.tps;

            // Get level time limit from levelData
            const currentLevel = levelData[type].levels.find(l => l.id === parseInt(levelId));
            const timeLimit = currentLevel ? currentLevel.time * 60 : 300; // Convert minutes to seconds
            let remainingTime = timeLimit;
            let timerInterval;

            function updateTimer() {
                const minutes = Math.floor(remainingTime / 60);
                const seconds = remainingTime % 60;
                const display = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                document.getElementById('timerDisplay').textContent = display;

                const timerContainer = document.getElementById('timerContainer');

                // Change color based on remaining time
                if (remainingTime <= 60) {
                    timerContainer.className = 'timer-container danger';
                } else if (remainingTime <= 120) {
                    timerContainer.className = 'timer-container warning';
                } else {
                    timerContainer.className = 'timer-container';
                }

                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    alert('‚è∞ Waktu habis! Quiz akan diselesaikan otomatis.');
                    finishQuiz();
                }

                remainingTime--;
            }

            // Start timer
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);

            // Store timer interval globally so it can be cleared
            window.currentTimerInterval = timerInterval;

            const questionBank = {
                // TPS - Level 1: Soekarno (Mudah - 2 soal)
                tps_1: [
                    { question: "Jika semua A adalah B, dan semua B adalah C, maka...", options: ["Semua C adalah A", "Tidak ada A yang C", "Semua A adalah C", "Sebagian A bukan C"], answer: 2 },

                    { question: "Sinonim dari kata 'INOVASI' adalah...", options: ["Pengulangan", "Pembaharuan", "Penghapusan", "Peniruan"], answer: 1 },

                    { question: "Antonim dari kata 'KONSISTEN' adalah...", options: ["Tetap", "Berubah-ubah", "Stabil", "Setia"], answer: 1 },

                    { question: "Jika 20% dari suatu bilangan adalah 40, maka bilangan tersebut adalah...", options: ["160", "180", "200", "220"], answer: 2 },

                    { question: "Kata yang memiliki makna paling dekat dengan 'IMPLIKASI' adalah...", options: ["Sebab", "Akibat", "Pilihan", "Proses"], answer: 1 },

                    { question: "Jika hari ini Kamis, maka 45 hari kemudian adalah hari...", options: ["Senin", "Selasa", "Rabu", "Kamis"], answer: 0 },

                    { question: "Hubungan kata: Guru : Sekolah = Dokter : ...", options: ["Pasien", "Obat", "Rumah sakit", "Perawat"], answer: 2 },

                    { question: "Jika x + 3 = 2x ‚àí 5, maka nilai x adalah...", options: ["6", "7", "8", "5"], answer: 1 },

                    { question: "Antonim dari kata 'EKSPANSIF' adalah...", options: ["Meluas", "Menyebar", "Menyempit", "Berkembang"], answer: 2 },

                    { question: "Manakah pernyataan yang bersifat fakta?", options: ["Cuaca hari ini panas", "Indonesia berada di Asia Tenggara", "Film itu sangat bagus", "Makanan ini enak"], answer: 1 },

                    { question: "Jika semua burung bisa terbang, dan elang adalah burung, maka...", options: ["Elang tidak bisa terbang", "Elang pasti bisa terbang", "Sebagian elang tidak terbang", "Tidak dapat disimpulkan"], answer: 1 },

                    { question: "Bentuk baku dari kata 'aktifitas' adalah...", options: ["Aktivitas", "Aktifitas", "Aktifitas", "Aktifitas"], answer: 0 },

                    { question: "Jika 3 pekerja menyelesaikan pekerjaan dalam 6 hari, maka 6 pekerja menyelesaikannya dalam...", options: ["2 hari", "3 hari", "4 hari", "6 hari"], answer: 1 },

                    { question: "Makna kata 'AMBIGU' adalah...", options: ["Jelas", "Tegas", "Bermakna ganda", "Pasti"], answer: 2 },

                    { question: "Deret angka: 2, 6, 12, 20, ...", options: ["28", "30", "32", "34"], answer: 0 },

                    { question: "Jika semua mahasiswa adalah pelajar, maka pernyataan yang benar adalah...", options: ["Semua pelajar adalah mahasiswa", "Sebagian mahasiswa bukan pelajar", "Mahasiswa termasuk pelajar", "Tidak ada mahasiswa yang pelajar"], answer: 2 },

                    { question: "Sinonim kata 'KRUSIAL' adalah...", options: ["Sepele", "Penting", "Ringan", "Biasa"], answer: 1 },

                    { question: "Jika sebuah persegi memiliki keliling 40 cm, maka panjang sisinya adalah...", options: ["8 cm", "9 cm", "10 cm", "12 cm"], answer: 2 },

                    { question: "Kata yang paling tepat melengkapi kalimat: Ia dikenal sebagai pemimpin yang ___ terhadap bawahan.", options: ["otoriter", "peduli", "acuh", "lalai"], answer: 1 },

                    { question: "Jika A lebih besar dari B, dan B lebih besar dari C, maka...", options: ["C lebih besar dari A", "A sama dengan C", "A lebih besar dari C", "Tidak dapat dibandingkan"], answer: 2 },

                    { question: "Antonim dari kata 'ABSTRAK' adalah...", options: ["Konseptual", "Nyata", "Imajiner", "Filosofis"], answer: 1 },

                    { question: "Manakah yang termasuk opini?", options: ["Air membeku pada 0¬∞C", "Matahari terbit di timur", "Buku ini sangat menarik", "Indonesia negara kepulauan"], answer: 2 },

                    { question: "Jika 5x = 45, maka nilai x adalah...", options: ["7", "8", "9", "10"], answer: 2 },

                    { question: "Makna kata 'KONTRADIKSI' adalah...", options: ["Kesepakatan", "Pertentangan", "Penyesuaian", "Perubahan"], answer: 1 },

                    { question: "Deret huruf: A, C, F, J, ...", options: ["M", "L", "N", "O"], answer: 0 },

                    { question: "Jika harga sebuah barang Rp80.000 setelah diskon 20%, maka harga awalnya adalah...", options: ["Rp95.000", "Rp100.000", "Rp90.000", "Rp85.000"], answer: 1 },

                    { question: "Sinonim dari kata 'VALID' adalah...", options: ["Sah", "Lemah", "Keliru", "Batal"], answer: 0 },

                    { question: "Jika semua X adalah Y dan semua Y adalah Z, maka hubungan X dan Z adalah...", options: ["Sebagian X bukan Z", "Semua X adalah Z", "Semua Z adalah X", "Tidak ada X yang Z"], answer: 1 },

                    { question: "Kata yang bermakna paling dekat dengan 'EFISIEN' adalah...", options: ["Cepat", "Hemat", "Lengkap", "Banyak"], answer: 1 },

                    { question: "Jika 1/4 dari suatu bilangan adalah 15, maka bilangan tersebut adalah...", options: ["45", "50", "60", "75"], answer: 2 }
                ],

            // TPS - Level 2: Mohammad Hatta (Sedang - 2 soal)
            tps_2: [
                    { question: "25% dari 80 adalah...", options: ["15", "20", "25", "30"], answer: 1 },
                    { question: "Antonim dari kata 'OPTIMIS' adalah...", options: ["Pesimis", "Realistis", "Idealis", "Praktis"], answer: 0 }
                ],
                // TPS - Level 3: Sutan Sjahrir (Sulit - 2 soal)
                tps_3: [
                    { question: "Jika 3x + 5 = 20, maka x = ...", options: ["3", "4", "5", "6"], answer: 2 },
                    { question: "Jika hari ini adalah Senin, maka 100 hari kemudian adalah hari...", options: ["Rabu", "Kamis", "Jumat", "Sabtu"], answer: 1 }
                ],

                // Bahasa Indonesia - Level 1: Ki Hajar Dewantara (Mudah - 2 soal)
                indo_1: [
                    { question: "Kata baku dari 'nasehat' adalah...", options: ["Nasihat", "Nasikhat", "Nasehad", "Nasihed"], answer: 0 },
                    { question: "Imbuhan yang tepat untuk kata 'ajar' menjadi kata kerja adalah...", options: ["Ber-", "Me-", "Pe-", "Ter-"], answer: 1 }
                ],
                // Bahasa Indonesia - Level 2: W.R. Supratman (Sedang - 2 soal)
                indo_2: [
                    { question: "Kalimat yang menggunakan kata baku adalah...", options: ["Saya telah mengerjakan PR", "Saya udah ngerjain PR", "Saya sudah kerjain PR", "Saya udah mengerjakan PR"], answer: 0 },
                    { question: "Jenis kalimat 'Tolong tutup pintu!' adalah...", options: ["Kalimat berita", "Kalimat tanya", "Kalimat perintah", "Kalimat seru"], answer: 2 }
                ],
                // Bahasa Indonesia - Level 3: Chairil Anwar (Sulit - 2 soal)
                indo_3: [
                    { question: "Kata serapan yang benar dari 'frequency' adalah...", options: ["Frekuensi", "Frekwensi", "Frequensi", "Frekuenci"], answer: 0 },
                    { question: "Majas yang digunakan dalam kalimat 'Wajahnya bersinar seperti matahari' adalah...", options: ["Metafora", "Personifikasi", "Simile", "Hiperbola"], answer: 2 }
                ],

                // Bahasa Inggris - Level 1: Cut Nyak Dien (Mudah - 2 soal)
                english_1: [
                    { question: "What is the synonym of 'HAPPY'?", options: ["Sad", "Joyful", "Angry", "Tired"], answer: 1 },
                    { question: "She ____ to school every day.", options: ["go", "goes", "going", "gone"], answer: 1 }
                ],
                // Bahasa Inggris - Level 2: R.A. Kartini (Sedang - 2 soal)
                english_2: [
                    { question: "Which sentence is grammatically correct?", options: ["He don't like pizza", "He doesn't likes pizza", "He doesn't like pizza", "He not like pizza"], answer: 2 },
                    { question: "What is the past tense of 'write'?", options: ["Wrote", "Written", "Writing", "Writed"], answer: 0 }
                ],
                // Bahasa Inggris - Level 3: Sultan Hasanuddin (Sulit - 2 soal)
                english_3: [
                    { question: "Choose the correct article: '__ apple a day keeps the doctor away'", options: ["A", "An", "The", "No article"], answer: 1 },
                    { question: "Which word is the adverb in this sentence: 'She quickly finished her homework'?", options: ["She", "quickly", "finished", "homework"], answer: 1 }
                ],

                // Matematika - Level 1: B.J. Habibie (Mudah - 2 soal)
                math_1: [
                    { question: "Hasil dari 12 √ó 15 = ...", options: ["160", "170", "180", "190"], answer: 2 },
                    { question: "20% dari 250 adalah...", options: ["40", "45", "50", "55"], answer: 2 }
                ],
                // Matematika - Level 2: Tjokro Aminoto (Sedang - 2 soal)
                math_2: [
                    { question: "Jika x¬≤ = 64, maka x = ...", options: ["6", "7", "8", "9"], answer: 2 },
                    { question: "Perbandingan 2:3 sama dengan...", options: ["4:6", "3:4", "5:6", "6:8"], answer: 0 }
                ],
                // Matematika - Level 3: Otto Iskandardinata (Sulit - 2 soal)
                math_3: [
                    { question: "Rata-rata dari 10, 15, 20, 25 adalah...", options: ["15", "17.5", "18", "20"], answer: 1 },
                    { question: "Jika sebuah segitiga memiliki sisi 3cm, 4cm, dan 5cm, maka segitiga tersebut adalah...", options: ["Segitiga sama sisi", "Segitiga sama kaki", "Segitiga siku-siku", "Segitiga sembarang"], answer: 2 }
                ]
            };

            const questions = questionBank[`${type}_${levelId}`] || questionBank.tps_1;
            window.quizQuestions = questions; // Store globally
            window.currentQuestion = 0;
            window.userAnswers = new Array(questions.length).fill(null);
            window.startTime = Date.now();

            const qEl = document.getElementById("question");
            const optEl = document.getElementById("options");
            const counter = document.getElementById("counter");
            const progressBar = document.getElementById("progressBar");
            const typeTitle = document.getElementById("typeTitle");
            const typeEmoji = document.getElementById("typeEmoji");
            const navGrid = document.getElementById("navGrid");
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");

            typeTitle.innerText = config.title;
            typeEmoji.innerText = config.emoji;

            // Initialize quiz
            initNavGrid();
            loadQuestion();
        }

        // Global quiz functions
        function initNavGrid() {
            const navGrid = document.getElementById("navGrid");
            const questions = window.quizQuestions;
            navGrid.innerHTML = '';
            for (let i = 0; i < questions.length; i++) {
                const btn = document.createElement('div');
                btn.className = 'nav-number';
                btn.textContent = i + 1;
                btn.onclick = () => goToQuestion(i);
                navGrid.appendChild(btn);
            }
        }

        function updateNavGrid() {
            const navGrid = document.getElementById("navGrid");
            const navButtons = navGrid.children;
            const questions = window.quizQuestions;
            for (let i = 0; i < questions.length; i++) {
                navButtons[i].className = 'nav-number';
                if (i === window.currentQuestion) {
                    navButtons[i].classList.add('current');
                } else if (window.userAnswers[i] !== null) {
                    navButtons[i].classList.add('answered');
                }
            }
        }

        function goToQuestion(index) {
            window.currentQuestion = index;
            loadQuestion();
        }

        function navigateQuestion(direction) {
            const questions = window.quizQuestions;
            const newIndex = window.currentQuestion + direction;
            if (newIndex >= 0 && newIndex < questions.length) {
                window.currentQuestion = newIndex;
                loadQuestion();
            }
        }

        function loadQuestion() {
            const questions = window.quizQuestions;
            const currentQuestion = window.currentQuestion;
            const userAnswers = window.userAnswers;

            const q = questions[currentQuestion];
            const qEl = document.getElementById("question");
            const optEl = document.getElementById("options");
            const counter = document.getElementById("counter");
            const progressBar = document.getElementById("progressBar");
            const prevBtn = document.getElementById("prevBtn");
            const nextBtn = document.getElementById("nextBtn");

            qEl.innerText = q.question;
            optEl.innerHTML = "";
            counter.innerText = `Soal ${currentQuestion + 1} / ${questions.length}`;

            const answeredCount = userAnswers.filter(a => a !== null).length;
            progressBar.style.width = (answeredCount / questions.length) * 100 + "%";

            q.options.forEach((opt, i) => {
                const div = document.createElement("div");
                div.className = "option";
                if (userAnswers[currentQuestion] === i) {
                    div.classList.add("selected");
                }
                div.innerText = opt;
                div.onclick = () => selectAnswer(div, i);
                optEl.appendChild(div);
            });

            updateNavGrid();
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = currentQuestion === questions.length - 1;
        }

        function selectAnswer(el, selectedIndex) {
            const progressBar = document.getElementById("progressBar");
            const questions = window.quizQuestions;

            document.querySelectorAll(".option").forEach(o => o.classList.remove("selected"));
            el.classList.add("selected");
            window.userAnswers[window.currentQuestion] = selectedIndex;
            updateNavGrid();
            const answeredCount = window.userAnswers.filter(a => a !== null).length;
            progressBar.style.width = (answeredCount / questions.length) * 100 + "%";
        }

        function finishQuiz() {
            const questions = window.quizQuestions;
            const userAnswers = window.userAnswers;
            const answeredCount = userAnswers.filter(a => a !== null).length;
            if (answeredCount < questions.length) {
                const unanswered = questions.length - answeredCount;
                if (!confirm(`Kamu masih memiliki ${unanswered} soal yang belum dijawab. Yakin ingin menyelesaikan quiz?`)) {
                    return;
                }
            }
            showResults();
        }

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.background = ['#667eea', '#764ba2', '#f093fb', '#f5576c'][Math.floor(Math.random() * 4)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        function showResults() {
            // Clear timer
            if (window.currentTimerInterval) {
                clearInterval(window.currentTimerInterval);
            }

            const questions = window.quizQuestions;
            const userAnswers = window.userAnswers;
            const startTime = window.startTime;
            const endTime = Date.now();
            const totalTime = Math.floor((endTime - startTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;

            let correctAnswers = 0;
            let wrongAnswers = 0;
            let unanswered = 0;

            userAnswers.forEach((answer, index) => {
                if (answer === null) {
                    unanswered++;
                } else if (answer === questions[index].answer) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
            });

            const score = correctAnswers * 5;
            const totalQuestions = questions.length;
            const percentage = Math.round((correctAnswers / totalQuestions) * 100);

            // ============== SAVE TO LOCALSTORAGE ==============
            const currentTotalScore = parseInt(localStorage.getItem('snbt_totalScore')) || 0;
            const newTotalScore = currentTotalScore + score;
            localStorage.setItem('snbt_totalScore', newTotalScore);

            const currentCompleted = parseInt(localStorage.getItem(`snbt_${type}_level${levelId}_completed_count`)) || 0;
            const newCompleted = currentCompleted + correctAnswers;
            localStorage.setItem(`snbt_${type}_level${levelId}_completed_count`, newCompleted);

            localStorage.setItem(`snbt_${type}_level${levelId}_completed`, 'true');
            localStorage.setItem(`snbt_${type}_level${levelId}_percentage`, percentage);
            localStorage.setItem(`snbt_${type}_level${levelId}_score`, score);
            localStorage.setItem(`snbt_${type}_level${levelId}_time`, totalTime);

            console.log('üìä SNBT Data saved!', type, 'Level', levelId, '-', percentage + '%');
            // ==================================================

            let predicate = "";
            let emoji = "";
            if (percentage >= 90) {
                predicate = "Sempurna!";
                emoji = "üåü";
                createConfetti();
            } else if (percentage >= 85) {
                predicate = "Luar Biasa!";
                emoji = "üéâ";
            } else if (percentage >= 70) {
                predicate = "Bagus!";
                emoji = "üëç";
            } else if (percentage >= 60) {
                predicate = "Cukup Baik";
                emoji = "üòä";
            } else if (percentage >= 50) {
                predicate = "Lumayan";
                emoji = "üôÇ";
            } else {
                predicate = "Perlu Belajar Lagi";
                emoji = "üìö";
            }

            document.querySelector('.app').innerHTML = `
                <div class="result-container">
                    <div class="result-emoji">${emoji}</div>
                    <div class="result-score">${score}</div>
                    <div class="result-predicate">${predicate}</div>
                    
                    <div class="result-stats">
                        <div class="stat-box">
                            <div class="stat-label">Benar</div>
                            <div class="stat-value" style="color: #48bb78;">‚úì ${correctAnswers}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Salah</div>
                            <div class="stat-value" style="color: #f56565;">‚úó ${wrongAnswers}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Tidak Dijawab</div>
                            <div class="stat-value" style="color: #ed8936;">‚äò ${unanswered}</div>
                        </div>
                    </div>

                    <div class="result-stats">
                        <div class="stat-box">
                            <div class="stat-label">Total Soal</div>
                            <div class="stat-value">${totalQuestions}</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Persentase</div>
                            <div class="stat-value">${percentage}%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Waktu</div>
                            <div class="stat-value">‚è± ${minutes}:${seconds.toString().padStart(2, '0')}</div>
                        </div>
                    </div>

                    <div class="result-buttons">
                        <a href="snbt.html?type=${type}&level=${levelId}" class="btn btn-primary">üîÑ Ulangi Level</a>
                        <a href="snbt.html?type=${type}" class="btn btn-secondary">üìã Pilih Level</a>
                        <a href="index.html" class="btn btn-secondary">üè† Beranda</a>
                    </div>
                </div>
            `;
        }

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.background = ['#667eea', '#764ba2', '#f093fb', '#f5576c'][Math.floor(Math.random() * 4)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Initialize quiz if level is selected
        if (levelId) {
            initNavGrid();
            loadQuestion();
        }
    </script>
</body>

</html>
